# =========================
# Application
# =========================
APP_MODE=oss                 # oss, cloud, standalone
APP_SERVICE=railzway-cloud
APP_VERSION=0.1.0
PORT=8080

ENVIRONMENT=development
APP_ENV=development          # used by some packages for dev-specific logic
APP_ROOT_DOMAIN=            # ex: railzway.com
APP_ROOT_SCHEME=            # http or https

# =========================
# Observability / OTLP
# =========================
OTLP_ENDPOINT=localhost:4317

# =========================
# Database
# =========================
DB_TYPE=postgres
DB_HOST=localhost
DB_PORT=5433
DB_NAME=postgres
DB_USER=postgres
DB_PASSWORD=postgres
DB_SSL_MODE=disable

# =========================
# Provisioning Database (Admin)
# =========================
PROVISION_DB_HOST=localhost
PROVISION_DB_PORT=5433
PROVISION_DB_NAME=postgres
PROVISION_DB_USER=postgres
PROVISION_DB_PASSWORD=postgres
PROVISION_DB_SSL_MODE=disable

# =========================
# Database Pooling
# =========================
DB_MAX_IDLE_CONN=10
DB_MAX_OPEN_CONN=100
DB_CONN_MAX_LIFETIME=3600    # seconds
DB_CONN_MAX_IDLE_TIME=60      # seconds

# =========================
# Authentication
# =========================
# Generate with: openssl rand -base64 32/64
AUTH_JWT_SECRET=
AUTH_COOKIE_SECURE=false
DEFAULT_ORG=0
ADMIN_API_TOKEN=

# =========================
# OAuth2 Credentials
# =========================
OAUTH2_CLIENT_ID=
OAUTH2_CLIENT_SECRET=

# =========================
# Auth Service (railzway-auth)
# =========================
AUTH_SERVICE_URL=
AUTH_SERVICE_ADMIN_TOKEN=
AUTH_SERVICE_TENANT=
AUTH_SERVICE_TIMEOUT=10

# =========================
# Railzway OSS / Instances
# =========================
RAILZWAY_OSS_VERSION=v1.6.0
STATIC_DIR=apps/railzway/dist

# =========================
# Nomad Config
# =========================
NOMAD_ADDR=http://127.0.0.1:4646
NOMAD_REGION=
NOMAD_NAMESPACE=
NOMAD_HTTP_AUTH=
NOMAD_CACERT=
NOMAD_CAPATH=
NOMAD_CLIENT_CERT=
NOMAD_CLIENT_KEY=
NOMAD_TLS_SERVER_NAME=
NOMAD_SKIP_VERIFY=false
NOMAD_TOKEN=

# =========================
# Railzway Client
# =========================
RAILZWAY_CLIENT_URL=
RAILZWAY_API_KEY=

RAILZWAY_CLIENT_TIMEOUT=30   # seconds
RAILZWAY_CLIENT_RETRY_COUNT=3
RAILZWAY_CLIENT_RETRY_DELAY=2   # seconds
RAILZWAY_CLIENT_CACHE_TTL=300   # seconds
RAILZWAY_CLIENT_CACHE_SIZE=1000
RAILZWAY_CLIENT_RATE_LIMIT=100   # requests per minute
RAILZWAY_CLIENT_RATE_BURST=2

RAILZWAY_CLIENT_ENABLE_CIRCUIT_BREAKER=true
RAILZWAY_CLIENT_CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
RAILZWAY_CLIENT_CIRCUIT_BREAKER_RECOVERY_TIME=60   # seconds
RAILZWAY_CLIENT_CIRCUIT_BREAKER_MIN_REQUESTS=10
RAILZWAY_CLIENT_CIRCUIT_BREAKER_SAMPLING_DURATION=60   # seconds
RAILZWAY_CLIENT_CIRCUIT_BREAKER_HALF_OPEN_MAX_SUCCESS=3

# =========================
# Provisioning Rate Limit Redis (Railzway OSS runtime)
# =========================
PROVISION_RATE_LIMIT_REDIS_ADDR=
PROVISION_RATE_LIMIT_REDIS_PASSWORD=
PROVISION_RATE_LIMIT_REDIS_DB=0
